{"version":3,"sources":["localResize.ui.coffee"],"names":[],"mappings":"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","file":"localResize.ui.js","sourceRoot":"/source/","sourcesContent":["# 获取当前js文件所在路径\r\ncurrentJSDir = do ->\r\n  js = document.scripts[document.scripts.length-1]\r\n  return js.src.substr 0, js.src.lastIndexOf '/'\r\n\r\n\r\nclass LrUI\r\n  constructor: (source) ->\r\n    @el      = source.el\r\n    @options = source.defaults\r\n    @source  = source\r\n\r\n    @_init @el\r\n\r\n  # reset\r\n  reset: ->\r\n    @el.classList.remove 'waiting'\r\n    @el.classList.remove 'success'\r\n    @el.classList.remove 'only-read'\r\n    @el.classList.add 'ready'\r\n\r\n    @el.querySelector('.lr-img').style.backgroundImage = null\r\n\r\n\r\n  # setWait\r\n  setWait: ->\r\n    @el.classList.remove 'ready'\r\n    @el.classList.remove 'success'\r\n    @el.classList.remove 'only-read'\r\n    @el.classList.add 'waiting'\r\n\r\n\r\n  # setImgOnly\r\n  setImgOnly: (url) ->\r\n    @el.classList.remove 'ready'\r\n    @el.classList.remove 'waiting'\r\n    @el.classList.remove 'success'\r\n    @el.classList.add 'only-read'\r\n\r\n    @el.querySelector('.lr-img').style.backgroundImage = \"url(#{url})\"\r\n\r\n\r\n  # setImg\r\n  setImg: (url) ->\r\n    @setSuccess()\r\n\r\n    @el.querySelector('.lr-img').style.backgroundImage = \"url(#{url})\"\r\n\r\n\r\n  # setSuccess\r\n  setSuccess: (cb) ->\r\n    @el.classList.remove 'ready'\r\n    @el.classList.remove 'waiting'\r\n    @el.classList.remove 'only-read'\r\n    @el.classList.add 'success'\r\n\r\n\r\n  # 设置标题\r\n  setTitle: (title) ->\r\n    title = title or @el.dataset.title\r\n\r\n    if title\r\n      @el.querySelector('.lr-title').innerHTML = title\r\n    else\r\n      @el.classList.add 'no-title'\r\n\r\n\r\n  # 生成元素\r\n  _addEl: ->\r\n    html = \"\"\"\r\n            <div class=\"lr-title\"></div>\r\n\r\n            <div class=\"lr-hint\">\r\n                <div class=\"lr-ready\">\r\n                    <i class=\"fa fa-camera\"></i>\r\n                    <p>点击上传</p>\r\n                </div>\r\n\r\n                <div class=\"lr-waiting\">\r\n                    <i class=\"fa fa-spinner fa-spin\"></i>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"lr-success\">\r\n                <div class=\"lr-remove\">\r\n                    <i class=\"fa fa-trash\"></i>\r\n                </div>\r\n\r\n                <div class=\"lr-img\"></div>\r\n            </div>\r\n             \"\"\"\r\n\r\n    @el.classList.add 'lr'\r\n    @el.classList.add 'lr-ui'\r\n    @el.innerHTML = html\r\n\r\n    @reset()\r\n\r\n\r\n  # 监听删除\r\n  _onRemove: ->\r\n    @el.querySelector('.lr-remove').addEventListener 'click', =>\r\n      @source.reset()\r\n    ,false\r\n\r\n\r\n  # 初始化样式\r\n  _initStyle: ->\r\n    style      = document.createElement 'link'\r\n    style.type = 'text/css'\r\n    style.rel  = 'stylesheet'\r\n    style.href = \"#{currentJSDir}/localResize.css\"\r\n    document.head.appendChild style\r\n\r\n    LrUI::_initStyle = -> return true\r\n\r\n\r\n  # 初始化入口\r\n  _init: ->\r\n    @_initStyle()\r\n    @_addEl()\r\n    @_onRemove()\r\n    @setTitle()\r\n\r\n\r\n# 开放接口\r\nwindow.LrUI = LrUI"]}